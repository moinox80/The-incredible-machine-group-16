// https://github.com/aorda/USSR-anthem-with-arduino-Piezo-buzzer/
const Wait = require('wait-for-stuff');

const notes = [
  "392", "523", "392", "440", "494", "330", "330",
  "440", "392", "349", "392", "262", "262",
  "294", "294", "330", "349", "349", "392", "440", "494", "523", "587",
  "659", "587", "523", "587", "494", "392",
  "523", "494", "440", "494", "330", "330",
  "440", "392", "349", "392", "262", "262",
  "523", "494", "440", "392", "494", "523", "587",
  "659", "587", "523", "494", "523", "587", "392", "392", "494", "523", "587",
  "523", "494", "440", "392", "440", "494", "330", "330", "392", "440", "494",
  "523", "440", "494", "523", "440", "494", "523", "440", "523", "698",
  "698", "659", "587", "523", "587", "659", "523", "523",
  "587", "523", "494", "440", "494", "523", "440", "440",
  "523", "494", "440", "392", "262", "392", "440", "494", "523"
]

const durations = [
  8, 4, 6, 16, 4, 8, 8,
  4, 6, 16, 4, 8, 8,
  4, 8, 8, 4, 8, 8, 4, 8, 8, 2,
  4, 6, 16, 4, 8, 8,
  4, 6, 16, 4, 8, 8,
  4, 6, 16, 4, 6, 16,
  4, 6, 16, 8, 8, 8, 8,
  2, 8, 8, 8, 8, 3, 8, 8, 8, 8, 8,
  2, 8, 8, 8, 8, 3, 8, 8, 8, 8, 8,
  4, 6, 16, 4, 6, 16, 4, 8, 8, 2,
  2, 8, 8, 8, 8, 3, 8, 2,
  2, 8, 8, 8, 8, 3, 8, 2,
  4, 6, 16, 4, 4, 2, 4, 4, 1
]

module.exports = (Piezo) => {
    for(let i = 0; i < notes.length; ++i){
        let duration = 2000 / durations[i],
            pause    = (2 / durations[i]) * 1.3;

        console.log(i);
        Piezo.frequency(+notes[i], duration);

        Wait.for.time(pause);
        Piezo.noTone();

    }
    Piezo.off();
}
